# Python强制缩进的问题
参考链接：https://yuyang0.github.io/articles/defects-of-python.html  
&emsp;&emsp;python强制缩进是一个明智的选择，它使得代码的可读性有了质的飞跃，但是它使用空 格这样的不可见字符来标示一个块的结束，我认为不是什么很好的选择。ruby社区有一 种说法：ruby使用end终结一个块是比python使用空格缩进更高级的做法。过去有一段时 间我对这种说法也是嗤之以鼻。但是我现在改变了看法, 使用空格这样的不可见字符来 标示一个块的结束有以下几个问题:

- ## 更容易出错
```python
def sum(ls):
    ret = 0
    for i in ls:
        ret += i
    return ret

# incorrect
def sum(ls):
    ret = 0
    for i in ls:
        ret += 1
        return ret
```

&emsp;&emsp;第二个函数仅仅因为多按了一个tab就产生了一个致命的bug，这种简单的例子可能还 好检查，可是对于复杂的函数这种bug很不好排查。如果有明确的块界定符，比如说 end，}，那么就根本不会有这种低级的问题.

- ## 无法使用编辑器来自动格式化代码  
&emsp;&emsp;这是一个很大的问题,当你从网上拷贝一段别人 的代码后,你必须小心翼翼的来确保代码的缩进正确, 编辑器是无法自动格式化像 python这类语言的代码的, 这不是因为编辑器不够强大，而是本质上不可能实现，所 以python的代码我们必须手动来格式化，这是很机械的工作，可是因为python的设计 失误，我们无法把它交给机器来做，曾经我因为写其他语言代码的习惯, 所以在emacs 中写python代码时总是喜欢运行代码自动格式化的命令，可是每一次都弄得一团糟， 最后不得不在配置中把python的格式化命令去掉了, 所以对于python的这种语法虽然 看上去很简洁，但是我不认为是一个好的设计。
- ## 无法实现一个完备的匿名函数
&emsp;&emsp;python的缩进方式除了导致第三方工具无法自动格 式化代码这个问题外，还有一个很大的问题，那就是python无法实现一个功能完备的 匿名函数。如果你有函数式编程经验，应该能体会匿名函数的重要性，举一个很简单 的例子，比如python的列表解析：
```python
[i+1 for i in range(10)]
map(lambda i: i+1, range(10))
```

二者实际是等价的，很多人对列表解析推崇有加，可是实际上它不过是个可有可无的 语法糖，而且还是一个表达能力并不强大的语法糖（我个人并不排斥语法糖，但是你 要明白语法糖背后隐藏的东西），这应该也是从haskell学来的，缩进语法应该也是， 我的印象中，python似乎从haskell学了很多蹩脚的东西。如果python能把匿名函数 做对，和map搭配会比列表解析强大的多。很可惜python的匿名函数就是一个“残废” 的东西，它内部只能有一个表达式，而不能像正常的函数那样包含多个语句，事实上 造成这一困境的原因就是python的缩进语法，因为匿名函数一般是作为参数传递给一 个函数，这样匿名函数的内部就不能换行，一旦换行缩进就乱了，所以python无法实 现一个完全正确的匿名函数。